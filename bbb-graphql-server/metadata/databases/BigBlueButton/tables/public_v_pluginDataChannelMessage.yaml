table:
  name: v_pluginDataChannelMessage
  schema: public
configuration:
  column_config: {}
  custom_column_names: {}
  custom_name: pluginDataChannelMessage
  custom_root_fields: {}
object_relationships:
  - name: sender
    using:
      manual_configuration:
        column_mapping:
          fromUserId: userId
        insertion_order: null
        remote_table:
          name: v_user_ref
          schema: public
select_permissions:
  - role: bbb_client
    permission:
      columns:
        - createdAt
        - dataChannel
        - messageId
        - payloadJson
        - fromUserId
        - pluginName
        - toRole
        - toUserId
      filter:
        _and:
          - meetingId:
              _eq: X-Hasura-MeetingId
          - _or:
              - toUserId:
                  _is_null: true
              - toUserId:
                  _eq: X-Hasura-UserId
          - _or:
              - toRole:
                  _is_null: true
              - _and:
                  - toRole:
                      _eq: MODERATOR
                  - meetingId:
                      _eq: X-Hasura-ModeratorInMeeting
              - _and:
                  - toRole:
                      _eq: VIEWER
                  - meetingId:
                      _neq: X-Hasura-ModeratorInMeeting
              - _and:
                  - toRole:
                      _eq: PRESENTER
                  - meetingId:
                      _eq: X-Hasura-PresenterInMeeting
    comment: ""
